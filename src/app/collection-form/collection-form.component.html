<div class="page-container">
    <div class="page-header">
        <button mat-icon-button routerLink="/collections" class="back-btn"
            matTooltip="Back to Collections"><mat-icon>arrow_back</mat-icon></button>
        <h2>{{ isEditing ? 'Edit Collection' : 'New Collection' }}</h2>
    </div>
    <div class="form-card glassmorphism">
        <div class="form-header">
            <mat-icon class="form-icon">folder_special</mat-icon>
            <p class="form-subtitle">{{ isEditing ? 'Update your dimension vault' : 'Open a new dimension vault for your
                thoughts' }}</p>
        </div>
        <form [formGroup]="collectionForm" (ngSubmit)="onSubmit()" class="cosmic-form">
            <mat-form-field appearance="outline">
                <mat-label>Collection Name</mat-label>
                <input matInput formControlName="name" placeholder="e.g., Quantum Physics Notes">
                <mat-icon matPrefix>label</mat-icon>
                <mat-hint align="end">{{ collectionForm.get('name')?.value?.length || 0 }}/50</mat-hint>
                <mat-error *ngIf="collectionForm.get('name')?.hasError('required')">Name is required</mat-error>
                <mat-error *ngIf="collectionForm.get('name')?.hasError('maxlength')">Max 50 characters</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description"
                    placeholder="What kind of thoughts will you store here?" rows="5"></textarea>
                <mat-icon matPrefix>notes</mat-icon>
                <mat-error *ngIf="collectionForm.get('description')?.hasError('required')">Description is
                    required</mat-error>
            </mat-form-field>
            <div class="form-actions">
                <button mat-flat-button type="submit" class="submit-btn" [disabled]="collectionForm.invalid">
                    <mat-icon>{{ isEditing ? 'save' : 'add_circle' }}</mat-icon><span>{{ isEditing ? 'Update Collection'
                        : 'Create Collection' }}</span>
                </button>
                <button mat-button type="button" class="cancel-btn" routerLink="/collections">Cancel</button>
            </div>
        </form>
    </div>
</div>